# ioSimu使用手册

## 功能概要

ioSimu软件用于对IO硬件进行仿真，使得可以在没有实际硬件设备的情况下，试用、测试监控系统。

特别是针对压力测试、大规模测试等不方便实际搭建硬件测试系统的场景。
或者是针对精密仪器、价格昂贵的仪器设备等使用串口通信的设备，不方便经常使用真实设备进行测试的场景。

![image-20211015112849290](ioSimu\image-20211015112849290.png)

## 仿真设备类型

| 设备类型      | 关键参数                                      |     |
| --------- | ----------------------------------------- | --- |
| TCP客户端类设备 | tds地址：表示主动去连接的tds服务的ip地址                  |     |
|           | tds端口：表示主动去连接的tds服务的端口号                   |     |
|           | ip地址: 表示仿真设备的ip地址                         |     |
| TCP服务端类设备 | ip地址: 表示仿真设备的ip地址                         |     |
|           | 端口:表示仿真服务的端口                              |     |
| 串口类设备     | 与有人物联网的VCOM软件配合使用，先仿真TCP服务端，再用VCOM映射为虚拟串口 |     |
|           |                                           |     |

## 项目管理

项目表示对一个具体的监控系统的硬件部分进行仿真。
可以直接使用tds的io配置，点击“打开”按钮，选择tds的配置中的io.json配置。
打开后，使用“另存为”按钮另外保存一份，因为仿真配置中的许多配置是tds中不需要的。

## 搭建仿真环境

设备仿真一般配合创建虚拟网卡，并批量添加ip来实现。

仿真软件在仿真设备时，会绑定虚拟网卡上的某个ip地址，来仿真该ip地址的设备。

[电脑中怎么添加虚拟网卡-百度经验](https://jingyan.baidu.com/article/fec4bce224f562b3608d8b37.html)

[批量添加ip脚本 - 下载](https://www.liangtusoft.com/files/tools/BatchAddIP.bat)

## 使用IOSimu和VCOM搭建串口硬件仿真系统

### 工具准备

下载ioSimu仿真工具 http://www.liangtusoft.com/download/tools/ioSimu.exe

下载虚拟串口工具https://www.usr.cn/Down/USR-VCOM_V3.7.2.529_Setup.exe

下载测试终端http://www.liangtusoft.com/download/tools/tdsTerminal.exe

### 配置仿真项目

新建项目

![image-20211013092652847](ioSimu\image-20211013092652847.png)

打开设备库

![image-20211013092715421](ioSimu\image-20211013092715421.png)

在设备库选择需要添加的仿真设备，在要添加的父节点上点击右键，

![image-20211013093745054](ioSimu\image-20211013093745054.png)

配置仿真的TCP服务端口

![image-20211013094008044](ioSimu\image-20211013094008044.png)

### 建立虚拟串口

打开有人物联网的VCOM软件，选择新建。选择新建 TCP Client-Vircom连接。该连接一端连接ioSimu的tcp服务端口,另一端开发一个虚拟串口，使得用户软件可以和ioSimu中的仿真设备建立连接

![image-20211013094336411](ioSimu\image-20211013094336411.png)

如下图，为第一个设备创建1个虚拟串口COM1

![image-20211013094656108](ioSimu\image-20211013094656108.png)

为第二个设备创建1个虚拟串口COM2

![image-20211013094835101](ioSimu\image-20211013094835101.png)

点击开始模拟，VCOM与ioSimu建立tcp连接

![image-20211013094949537](ioSimu\image-20211013094949537.png)

### 使用串口终端进行测试

![image-20211013112956504](ioSimu\image-20211013112956504.png)
